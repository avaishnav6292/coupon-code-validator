(this["webpackJsonpcoupon-code-validator"]=this["webpackJsonpcoupon-code-validator"]||[]).push([[0],{25:function(e,t,a){},27:function(e,t,a){},37:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),r=a(16),s=a.n(r),o=(a(25),a(2)),l=a.n(o),i=a(4),u=a(7),d=a(8),j=a(10),h=a(9),p="https://coupon-code-validator.herokuapp.com",b=(a(27),a(0)),m=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).getUrl=function(){return"".concat(p,"/cart/").concat(e.props.item._id)},e.addItemToCart=Object(i.a)(l.a.mark((function t(){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.getUrl(),t.prev=1,t.next=4,fetch(a,{method:"POST"});case 4:t.next=10;break;case 6:t.prev=6,t.t0=t.catch(1),alert("Error connecting to server"),console.log("Error:",t.t0);case 10:case"end":return t.stop()}}),t,null,[[1,6]])}))),e}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props.item.quantity?"":"out-of-stock";return Object(b.jsx)("div",{className:"col-xs-12 col-sm-6 col-md-4 col-lg-3 my-3",children:Object(b.jsxs)("div",{className:"card",style:{height:"100%",width:"100%"},children:[Object(b.jsx)("img",{className:"card-img-top ".concat(e),src:this.props.item.image,alt:"item"}),Object(b.jsxs)("div",{className:"card-body",children:[Object(b.jsx)("h5",{className:"card-title",children:this.props.item.brand}),Object(b.jsx)("p",{className:"card-text",children:this.props.item.name}),Object(b.jsx)("p",{children:"Rs. ".concat(this.props.item.price)})]}),Object(b.jsx)("a",{onClick:this.addItemToCart,className:"btn btn-primary w-100 pt-3",style:{height:"50px"},children:"Add to Cart"})]})})}}]),a}(c.a.Component),x=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("nav",{className:"navbar text-white bg-dark",children:[Object(b.jsx)("h3",{children:Object(b.jsx)("a",{href:"/",style:{color:"white",textDecoration:"none"},children:"Lorem Ipsum"})}),this.props.children]})})}}]),a}(c.a.Component),O=a(19),f=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).getUrl=function(){return"".concat(p,"/coupons")},e.onFormSubmit=function(){var t=Object(i.a)(l.a.mark((function t(a){var n,c,r,s,o,i,u,d,j;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),console.log(a.target),n=Object.keys(a.target).map((function(e){return a.target[e].value})),c=Object(O.a)(n),r=c[0],s=c[1],o=c[2],i=c[3],u=c[4],d=c[5],c.slice(6),j=e.getUrl(),t.prev=4,t.next=7,fetch(j,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({couponCode:r.toUpperCase(),startDate:s,expiryDate:o,type:i,minCartValue:parseInt(u),discountValue:parseInt(d)})});case 7:t.sent,alert("Coupon Code '".concat(r,"' added successfully.")),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),console.log("Error connecting to server",t.t0);case 14:case"end":return t.stop()}}),t,null,[[4,11]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(d.a)(a,[{key:"render",value:function(){return Object(b.jsx)("div",{className:"modal fade",id:"exampleModal",tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:Object(b.jsx)("div",{className:"modal-dialog",role:"document",children:Object(b.jsxs)("div",{className:"modal-content",children:[Object(b.jsxs)("div",{className:"modal-header",children:[Object(b.jsx)("h5",{className:"modal-title",id:"exampleModalLabel",children:"Add New Coupon"}),Object(b.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:Object(b.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(b.jsx)("div",{className:"modal-body",children:Object(b.jsxs)("form",{onSubmit:this.onFormSubmit,children:[Object(b.jsx)("label",{className:"w-100",children:"Coupon Code:"}),Object(b.jsx)("input",{name:"coupon-code",className:"w-100",type:"text",placeholder:"Enter Coupon Code"}),Object(b.jsx)("hr",{}),Object(b.jsx)("label",{className:"w-100",children:"Start Dat:"}),Object(b.jsx)("input",{name:"start-date",className:"w-100",type:"date",placeholder:"Select Coupon Start Date"}),Object(b.jsx)("hr",{}),Object(b.jsx)("label",{className:"w-100",children:"Expiry Date:"}),Object(b.jsx)("input",{name:"expiry-date",className:"w-100",type:"date",placeholder:"Select Coupon Start Date"}),Object(b.jsx)("hr",{}),Object(b.jsx)("label",{className:"w-100",children:"Type:"}),Object(b.jsxs)("select",{name:"coupon-type",children:[Object(b.jsx)("option",{value:"0",selected:!0,disabled:!0,children:"Select Coupon Code Type"}),Object(b.jsx)("option",{value:"flat",children:"Flat"}),Object(b.jsx)("option",{value:"percentage",children:"Percentage"})]}),Object(b.jsx)("hr",{}),Object(b.jsx)("label",{className:"w-100",children:"Min Cart Value:"}),Object(b.jsx)("input",{name:"min-cart-value",className:"w-100",type:"number",placeholder:"Enter Minimum Cart Value"}),Object(b.jsx)("hr",{}),Object(b.jsx)("label",{className:"w-100",children:"Discount Value:"}),Object(b.jsx)("input",{name:"discount-value",className:"w-100",type:"number",placeholder:"Enter Discount Value"}),Object(b.jsx)("hr",{}),Object(b.jsxs)("div",{className:"d-flex flex-row justify-content-end",children:[Object(b.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Save changes"}),Object(b.jsx)("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",children:"Close"})]})]})})]})})})}}]),a}(c.a.Component),v=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).getUrl=function(){return"".concat(p,"/items")},n.getItemsData=function(){var e=Object(i.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.componentDidMount=Object(i.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.getUrl(),e.next=3,n.getItemsData(t);case 3:a=e.sent,n.items=a,n.setState({searchResult:a}),console.log(n.state.searchResult);case 7:case"end":return e.stop()}}),e)}))),n.onSearchInputChange=function(e){var t=e.target.value;n.setState({searchResult:n.items.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())||e.category.toLowerCase().includes(t.toLowerCase())||e.type.toLowerCase().includes(t.toLowerCase())||e.image.toLowerCase().includes(t.toLowerCase())||e.gender.toLowerCase().includes(t.toLowerCase())||e.brand.toLowerCase().includes(t.toLowerCase())}))})},n.items=[],n.state={searchResult:[]},n}return Object(d.a)(a,[{key:"render",value:function(){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(x,{children:Object(b.jsx)("form",{class:"form-inline d-flex flex-row",children:Object(b.jsx)("input",{class:"form-control mr-sm-2",type:"search",placeholder:"Search by name, brand, category","aria-label":"Search",onChange:this.onSearchInputChange})})}),Object(b.jsxs)("div",{className:"container",children:[Object(b.jsxs)("div",{className:"row my-2 d-flex flex-row justify-content-around",children:[Object(b.jsx)("button",{className:"btn btn-primary","data-toggle":"modal","data-target":"#exampleModal",children:"Add Coupon"}),Object(b.jsx)("a",{href:"/coupons",className:"btn btn-primary",children:"View Coupons"}),Object(b.jsx)("a",{href:"/cart",className:"btn btn-primary",children:"Go to Cart"})]}),Object(b.jsx)("div",{className:"row",children:this.state.searchResult.map((function(e){return Object(b.jsx)(m,{item:e})}))})]}),Object(b.jsx)(f,{})]})}}]),a}(c.a.Component),g=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).getUrl=function(){return"".concat(p)},n.getCartData=function(){var e=Object(i.a)(l.a.mark((function e(t){var a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t);case 3:return a=e.sent,e.next=6,a.json();case 6:c=e.sent,n.setState({cartIds:c.map((function(e){return e.item_id}))}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),n.getCartItems=function(){var e=Object(i.a)(l.a.mark((function e(t){var a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t);case 3:return a=e.sent,e.next=6,a.json();case 6:c=e.sent,n.setState({cartItems:c.filter((function(e){return n.state.cartIds.includes(e._id)}))}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),n.removeCartItem=function(){var e=Object(i.a)(l.a.mark((function e(t){var a,c,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target.value,e.next=3,fetch("".concat(p,"/cart/").concat(a),{method:"DELETE"});case 3:return c=n.getUrl(),e.next=6,n.getCartData(c+"/cart");case 6:return e.next=8,n.getCartItems(c+"/items");case 8:document.getElementById("discounted-value").innerHTML="-",r=n.getCartTotalValue(),document.getElementById("final-cart-value").innerHTML="Rs. ".concat(r);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.getCartTotalValue=function(){return n.state.cartItems.map((function(e){return e.price})).reduce((function(e,t){return e+t}),0)},n.verifyCouponCode=Object(i.a)(l.a.mark((function e(){var t,a,c,r,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.getElementById("coupon-code"),a=n.getCartTotalValue(),c=n.getUrl()+"/checkout?"+new URLSearchParams({cartValue:a,couponCode:t.value.toUpperCase()}),e.next=5,fetch(c);case 5:return r=e.sent,e.next=8,r.json();case 8:(s=e.sent).Error?alert(s.Error):(document.getElementById("discounted-value").innerHTML=n.getCartTotalValue()-s.finalCartValue,document.getElementById("final-cart-value").innerHTML="Rs. ".concat(s.finalCartValue));case 10:case"end":return e.stop()}}),e)}))),n.componentDidMount=Object(i.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.getUrl(),e.next=3,n.getCartData(t+"/cart");case 3:return e.next=5,n.getCartItems(t+"/items");case 5:case"end":return e.stop()}}),e)}))),n.state={cartIds:[],cartItems:[]},n}return Object(d.a)(a,[{key:"render",value:function(){var e=this;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(x,{}),Object(b.jsx)("div",{className:"container mt-5",children:Object(b.jsxs)("div",{className:"row",children:[Object(b.jsxs)("div",{className:"col-xs-12 col-md-8",children:[this.state.cartItems&&this.state.cartItems.map((function(t){return Object(b.jsxs)("div",{className:"row py-1 my-2",style:{boxShadow:"1px 1px 2px 2px silver"},children:[Object(b.jsx)("div",{className:"col-2",children:Object(b.jsx)("img",{className:"w-100",src:t.image,alt:"cart item"})}),Object(b.jsxs)("div",{className:"col-10",children:[Object(b.jsx)("h5",{children:t.brand}),Object(b.jsx)("p",{children:t.name}),Object(b.jsx)("p",{children:t.price}),Object(b.jsx)("button",{className:"btn btn-primary",value:t._id,onClick:e.removeCartItem,children:"Remove"})]})]})})),0===this.state.cartIds.length&&Object(b.jsx)("div",{children:"Cart is empty. Add items to cart to checkout."})]}),Object(b.jsxs)("div",{className:"col-xs-12 col-md-4",children:[Object(b.jsx)("input",{className:"w-100 my-3",id:"coupon-code",placeholder:"Enter coupon code",type:"text"}),Object(b.jsx)("button",{className:"btn btn-primary w-100",onClick:this.verifyCouponCode,children:"Apply Coupon"}),Object(b.jsxs)("div",{className:"mt-3 d-flex flex-row justify-content-between",children:[Object(b.jsx)("strong",{children:"Total Items:"}),Object(b.jsx)("div",{children:this.state.cartIds.length})]}),Object(b.jsx)("hr",{}),Object(b.jsxs)("div",{className:"d-flex flex-row justify-content-between",children:[Object(b.jsx)("strong",{children:"Total Cart Value:"}),Object(b.jsxs)("div",{children:["Rs. ",this.getCartTotalValue()]})]}),Object(b.jsx)("hr",{}),Object(b.jsxs)("div",{className:"d-flex flex-row justify-content-between",children:[Object(b.jsx)("strong",{children:"Discount Value:"}),Object(b.jsx)("div",{id:"discounted-value",children:"-"})]}),Object(b.jsx)("hr",{}),Object(b.jsxs)("div",{className:"d-flex flex-row justify-content-between",children:[Object(b.jsx)("strong",{children:"Cart Value after Discount"}),Object(b.jsxs)("div",{id:"final-cart-value",children:["Rs. ",this.getCartTotalValue()]})]})]})]})})]})}}]),a}(c.a.Component),C=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).getAllCoupons=Object(i.a)(l.a.mark((function e(){var t,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(p,"/coupons"),e.next=3,fetch(t);case 3:return a=e.sent,e.next=6,a.json();case 6:c=e.sent,console.log(c),n.setState({coupons:c});case 9:case"end":return e.stop()}}),e)}))),n.componentDidMount=Object(i.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getAllCoupons();case 2:case"end":return e.stop()}}),e)}))),n.state={coupons:[]},n}return Object(d.a)(a,[{key:"render",value:function(){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(x,{}),Object(b.jsxs)("div",{className:"container mt-5",children:[Object(b.jsx)("h4",{children:"Coupons"}),Object(b.jsxs)("table",{children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{style:{border:"2px solid black",backgroundColor:"gray"},children:[Object(b.jsx)("th",{className:"px-2",children:"Coupon Code"}),Object(b.jsx)("th",{className:"px-2",children:"Minimum Cart Value"}),Object(b.jsx)("th",{className:"px-2",children:"Discount Type"}),Object(b.jsx)("th",{className:"px-2",children:"Discount Value"}),Object(b.jsx)("th",{className:"px-2",children:"Start Date"}),Object(b.jsx)("th",{className:"px-2",children:"Expiry Date"})]})}),Object(b.jsx)("tbody",{children:this.state.coupons.length&&this.state.coupons.map((function(e){return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:e.couponCode}),Object(b.jsx)("td",{children:e.minCartValue}),Object(b.jsx)("td",{children:e.type}),Object(b.jsx)("td",{children:e.discountValue}),Object(b.jsx)("td",{children:e.startDate}),Object(b.jsx)("td",{children:e.expiryDate})]})}))})]})]})]})}}]),a}(c.a.Component),y=a(20),w=a(3);var N=function(){return Object(b.jsx)("div",{className:"App",children:Object(b.jsx)(y.a,{children:Object(b.jsxs)(w.c,{children:[Object(b.jsx)(w.a,{exact:!0,path:"/",component:v}),Object(b.jsx)(w.a,{path:"/cart",component:g}),Object(b.jsx)(w.a,{path:"/coupons",component:C})]})})})},k=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,38)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;a(e),n(e),c(e),r(e),s(e)}))};s.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(N,{})}),document.getElementById("root")),k()}},[[37,1,2]]]);
//# sourceMappingURL=main.bfff70d9.chunk.js.map